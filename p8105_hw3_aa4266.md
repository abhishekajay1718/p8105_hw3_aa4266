P8105 HW3
================
Abhishek Ajay (aa4266)
October 14, 2018

Problem 1
=========

Data import and cleaning

``` r
brfss_data_tidy = 
  p8105.datasets::brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  rename(resp_id = respid, location_abbr = locationabbr, location_desc = locationdesc) %>% #further manual renaming to appropriate variable names
  filter(topic == "Overall Health") %>% 
  select(year, location_abbr, location_desc, response, data_value)

brfss_data_tidy$response = 
  brfss_data_tidy$response %>%  
  factor(levels = c("Excellent", "Very good", "Good", "Fair", "Poor"))

brfss_data_tidy
```

    ## # A tibble: 10,625 x 5
    ##     year location_abbr location_desc         response  data_value
    ##    <int> <chr>         <chr>                 <fct>          <dbl>
    ##  1  2010 AL            AL - Jefferson County Excellent       18.9
    ##  2  2010 AL            AL - Jefferson County Very good       30  
    ##  3  2010 AL            AL - Jefferson County Good            33.1
    ##  4  2010 AL            AL - Jefferson County Fair            12.5
    ##  5  2010 AL            AL - Jefferson County Poor             5.5
    ##  6  2010 AL            AL - Mobile County    Excellent       15.6
    ##  7  2010 AL            AL - Mobile County    Very good       31.3
    ##  8  2010 AL            AL - Mobile County    Good            31.2
    ##  9  2010 AL            AL - Mobile County    Fair            15.5
    ## 10  2010 AL            AL - Mobile County    Poor             6.4
    ## # ... with 10,615 more rows

Here we cleaned the data by focussing only on the "Overall Health" topic. Under this topic the response are exhaustively "Excellent", "Very good", "Good", "Fair" and "Poor".

We recoded the reponse column into a factor data type and set the levels from the "Excellent" to "Poor".

Now we do some *exploratory analysis* of the data in the following:

1.  In 2002, which states were observed at 7 locations?

``` r
brfss_data_tidy %>% 
  ungroup() %>% 
  filter(year == 2002) %>% 
  distinct(location_abbr, location_desc) %>% 
  group_by(location_abbr) %>% 
  count() %>% 
  filter(n == 7) %>% 
  select(location_abbr) %>% 
  knitr::kable()
```

| location\_abbr |
|:---------------|
| CT             |
| FL             |
| NC             |

In 2002, the states: CT, FL and NC were observed at 7 locations.

1.  Make a “spaghetti plot” that shows the number of locations in each state from 2002 to 2010.

``` r
#Restructuring the data for the plot required and Spaghetting plot using ggplot
brfss_data_tidy %>% 
  ungroup() %>% 
  group_by(year, location_abbr) %>% 
  distinct(location_abbr, location_desc) %>% 
  summarise(location_count = n()) %>% 
  ggplot(aes(x = year, y = location_count, color = location_abbr)) +
    geom_line() +
    labs(
      title = "Number of locations in each state",
      x = "Year",
      y = "Number of locations",
      color = 'States'
    ) 
```

<img src="p8105_hw3_aa4266_files/figure-markdown_github/p1.2_brfss-1.png" width="90%" />
